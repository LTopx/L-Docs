import { Callout } from "nextra/components";

# ENV 环境变量

L-GPT 目前所有的环境变量配置都是 **_可选的_**，也就是说一个都不配也能正常运行。配置不同的环境变量可以实现不同的功能。

## Vercel 配置

<Callout type="info" emoji="ℹ️">
  因为目前服务只考虑部署到 vercel 的情况，因此会有一些 vercel
  专属的配置。后续会考虑支持其他部署方式。
</Callout>

#### `CRON_SECRET`

vercel 上定时任务密钥。该变量只能在 vercel 上配置，本地 env 文件里配置无效。

## 数据库配置

#### `DATABASE_URL`

数据库连接 url 地址

- 示例：`postgresql://USER:PASSWORD@HOST:PORT/DATABASE`
- 如果不配置，那么与数据库相关的内容全部不能使用

## ChatGPT API 配置

#### `NEXT_PUBLIC_OPENAI_API_KEY`

你的 OpenAI API Key

- 如果配置正确，那么不需要在 key 配置页面配置 OpenAI API Key 即可使用

#### `NEXT_PUBLIC_OPENAI_API_PROXY`

OpenAI API 代理地址

- 如不配置则默认使用 OpenAI 官方域名：https://api.openai.com

#### `NEXT_PUBLIC_AZURE_OPENAI_API_KEY`

你的 Azure OpenAI API Key。[参考地址](/api-key-configure/azure)

- 如果配置正确，那么不需要在 key 配置页面配置 Azure API Key 即可使用

#### `NEXT_PUBLIC_AZURE_OPENAI_RESOURCE_NAME`

你的 Azure OpenAI 资源名称。[参考地址](/api-key-configure/azure)

- 如不配置则无法使用 Azure 接口，在用户尝试请求 azure 接口时报错提示

#### `NEXT_AZURE_OPENAI_API_VERSION`

Azure OpenAI API 版本。

- 默认值：`2023-07-01-preview`
- 默认版本会随时更新，不配置的话会用代码里配置的版本

## NextAuth 配置

<Callout emoji="⚠️" type="warning">
  若不配置 NextAuth 相关配置，则会屏蔽掉用户登录模块。
</Callout>

### Auth Secret

#### `NEXT_PUBLIC_AUTH_SECRET`

NextAuth Secret 配置。 [参考地址](https://next-auth.js.org/configuration/options#secret)

### Email 登录

<Callout emoji="👾">只有全部配置了，才能”邮箱“登录。</Callout>

#### `NEXT_PUBLIC_EMAIL_SERVER_HOST`

用于验证的邮箱的 Host 地址。

#### `NEXT_PUBLIC_EMAIL_SERVER_PORT`

用于验证的邮箱的端口号。

#### `NEXT_PUBLIC_EMAIL_SERVER_USER`

用于验证的邮箱的用户名。

#### `NEXT_PUBLIC_EMAIL_SERVER_PASSWORD`

用于验证的邮箱的密码。

#### `NEXT_PUBLIC_EMAIL_FROM` (optional)

用于验证的邮箱的来源地址。配置了这个，用户收到邮件后能够显示来源地址

### Github 登录

<Callout emoji="👾">
  只有全部配置了，才能使用”Github“登录。[参考地址](https://next-auth.js.org/providers/github#options)
</Callout>

#### `NEXT_PUBLIC_GITHUB_ID`

Github id

#### `NEXT_PUBLIC_GITHUB_SECRET`

Github secert

### Google 登录

<Callout emoji="👾">
  只有全部配置了，才能”Google“登录。[参考地址](https://next-auth.js.org/providers/google)
</Callout>

#### `NEXT_PUBLIC_GOOGLE_CLIENT_ID`

Google id

#### `NEXT_PUBLIC_GOOGLE_CLIENT_SECRET`

Google secert

## Upstash Redis 配置

<Callout emoji="👾">
  只有全都配置了才会调用 Redis 记录分享会话的浏览次数。
</Callout>

#### `NEXT_PUBLIC_UPSTASH_REDIS_REST_URL`

upstash redis url

#### `NEXT_PUBLIC_UPSTASH_REDIS_REST_TOKEN`

upstash redis token

## Lemon Squeezy 配置

#### `NEXT_PUBLIC_LEMONSQUEEZY_API_KEY`

只有配置了 `Lemon Squeezy` 配置和 `NextAuth` 配置，才会启用“登录”模块。

## Azure TTS 配置

<Callout emoji="👾">都配置了才会开启语音功能。</Callout>

#### `NEXT_PUBLIC_AZURE_TTS_KEY`

Azure TTS 服务的 Key

#### `NEXT_PUBLIC_AZURE_TTS_REGION`

Azure TTS 服务的部署区域

## UMAMI 网站分析配置

<Callout emoji="👾">
  都配置了才会开启网站分析功能。[参考地址](https://umami.is/docs/getting-started)
</Callout>

#### `NEXT_PUBLIC_UMAMI_SCRIPT_URL`

umami script url

#### `NEXT_PUBLIC_UMAMI_WEBSITE_ID`

umami website id

## 完整配置示例

```bash copy
# ChatGPT API 配置
NEXT_PUBLIC_OPENAI_API_KEY=
NEXT_PUBLIC_OPENAI_API_PROXY=
NEXT_PUBLIC_AZURE_OPENAI_API_KEY=
NEXT_PUBLIC_AZURE_OPENAI_RESOURCE_NAME=
NEXT_AZURE_OPENAI_API_VERSION=

# 数据库配置
DATABASE_URL=

# NextAuth 配置
NEXT_PUBLIC_EMAIL_SERVER_HOST=
NEXT_PUBLIC_EMAIL_SERVER_PORT=
NEXT_PUBLIC_EMAIL_SERVER_USER=
NEXT_PUBLIC_EMAIL_SERVER_PASSWORD=
NEXT_PUBLIC_EMAIL_FROM=
NEXT_PUBLIC_GITHUB_ID=
NEXT_PUBLIC_GITHUB_SECRET=
NEXT_PUBLIC_GOOGLE_CLIENT_ID=
NEXT_PUBLIC_GOOGLE_CLIENT_SECRET=
NEXT_PUBLIC_AUTH_SECRET=

# Upstash Redis 配置
NEXT_PUBLIC_UPSTASH_REDIS_REST_URL=
NEXT_PUBLIC_UPSTASH_REDIS_REST_TOKEN=

# Lemon Squeezy 配置
NEXT_PUBLIC_LEMONSQUEEZY_API_KEY=

# Azure TTS 配置
NEXT_PUBLIC_AZURE_TTS_KEY=
NEXT_PUBLIC_AZURE_TTS_REGION=

# UMAMI 网站分析
NEXT_PUBLIC_UMAMI_SCRIPT_URL=
NEXT_PUBLIC_UMAMI_WEBSITE_ID=

# 其他配置
# Vercel Cron Secret
# 本地配置无效，只需在vervel环境变量配置
CRON_SECRET=
```
